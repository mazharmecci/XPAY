<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>XPAY - Employee Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<body class="employee-page">
  <main>
    <!-- ðŸŒ° Form Wrapper -->
    <div class="form-wrapper">
      <div class="form-header centered-logo">
        <img src="images/x.png" alt="XPAY Logo" class="form-logo" />
        <p class="tagline">ISTOS XPAY APP</p>
      </div>

      <!-- ðŸŽ‰ Welcome Banner -->
      <div id="welcomeBanner" class="welcome-banner">Welcome back!</div>

      <!-- ðŸ§¾ Expense Form -->
      <form id="expenseForm" novalidate>
        <!-- Workflow Selector -->
        <div class="workflow-selector">
          <label for="workflowType"><strong>Select Workflow:</strong></label>
          <select id="workflowType" name="workflowType" required>
            <option value="" disabled selected>-- Choose --</option>
            <option value="sales">Sales</option>
            <option value="service">Service</option>
          </select>
        </div>

        <!-- Tabs with Inputs -->
        <div class="tab-content" data-tab="fuel">
          <label>Fuel Amount:</label>
          <input type="number" name="fuelAmount" />
          <label>Date:</label>
          <input type="date" name="fuelDate" />
        </div>

        <div class="tab-content" data-tab="travel">
          <label>Travel Place:</label>
          <input type="text" name="travelPlace" />
          <label>Travel Amount:</label>
          <input type="number" name="travelAmount" />
          <label>Date:</label>
          <input type="date" name="travelDate" />
        </div>

        <div class="tab-content" data-tab="boarding">
          <label>Boarding Amount:</label>
          <input type="number" name="boardingAmount" />
          <label>Date:</label>
          <input type="date" name="boardingDate" />
        </div>

        <div class="tab-content" data-tab="food">
          <label>Food Amount:</label>
          <input type="number" name="foodAmount" />
          <label>Date:</label>
          <input type="date" name="foodDate" />
        </div>

        <div class="tab-content" data-tab="localconveyance">
          <label>Local Conveyance Amount:</label>
          <input type="number" name="localConveyanceAmount" />
          <label>Date:</label>
          <input type="date" name="localConveyanceDate" />
        </div>

        <div class="tab-content" data-tab="misc">
          <label>Misc Amount:</label>
          <input type="number" name="miscAmount" />
          <label>Date:</label>
          <input type="date" name="miscDate" />
        </div>

        <div class="tab-content" data-tab="cash">
          <label>Cash Amount:</label>
          <input type="number" name="cashAmount" />
          <label>Date:</label>
          <input type="date" name="cashDate" />
        </div>

        <div class="tab-content" data-tab="monthlyconveyance">
          <label>Monthly Conveyance Amount:</label>
          <input type="number" name="monthlyConveyanceAmount" />
          <label>Date:</label>
          <input type="date" name="monthlyConveyanceDate" />
        </div>

        <div class="tab-content" data-tab="phone">
          <label>Phone Amount:</label>
          <input type="number" name="phoneAmount" />
          <label>Date:</label>
          <input type="date" name="phoneDate" />
        </div>

        <!-- Toast -->
        <div id="toast" class="toast"></div>

        <!-- Submit Button -->
        <button type="submit" class="submit-btn">Submit Expense</button>
      </form>
    </div>

    <!-- ðŸ“Š Expense Report -->
    <section id="expenseReport" class="report-section">
      <h2>View Your Expenses</h2>
      <table id="reportTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- ðŸšª Logout Button -->
    <div class="logout-container">
      <button onclick="logoutUser()" class="logout-btn inside-form">ðŸšª Logout</button>
    </div>

    <!-- ðŸ“¦ Scripts -->
    <script type="module" src="firebase.js"></script>
    <script type="module" src="employee.js"></script>

    <!-- ðŸ“¢ Welcome Message Script -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const message = localStorage.getItem("welcomeMessage");
        if (message) {
          document.getElementById("welcomeBanner").textContent = message;
        }
      });
    </script>

    <!-- ðŸ” Firebase Logout Logic -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
      import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyC-heT_dKo-O6523VVNPKW_Q-D6qxW8_HY",
        authDomain: "xpay-b0298.firebaseapp.com",
        projectId: "xpay-b0298",
        storageBucket: "xpay-b0298.firebasestorage.app",
        messagingSenderId: "518708112275",
        appId: "1:518708112275:web:0ea8d94b4c3734d1895666"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      window.logoutUser = async function () {
        try {
          await signOut(auth);
          localStorage.removeItem("welcomeMessage");
          window.location.href = "login.html";
        } catch (error) {
          console.error("Logout failed:", error);
        }
      };
    </script>

    <!-- ðŸ“Š Expense Report -->
    <section id="expenseReport" class="report-section">
      <h2>View Your Expenses</h2>
      <table id="reportTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- ðŸ§¾ Footer -->
    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="images/istos-logo.png" alt="ISTOS Logo" class="footer-logo" />
          <p>XPAY by ISTOS Medical Private Limited</p>
          <p>51/5, Ground Floor, BSTN Heights,<br>
            2nd Cr J.C Industrial Area, Bakasipura Mn Rd,<br>
            Yelachenhalli, Bangalore - 560062</p>
        </div>
        <div class="footer-legal">
          <p>Â© 2015-2025 ISTOS Medical Private Limited.</p>
        </div>
      </div>
    </footer>   

    <!-- ðŸšª Logout Button -->
    <div class="logout-container">
      <button onclick="logoutUser()" class="logout-btn inside-form">ðŸšª Logout</button>
    </div>

    <!-- ðŸ“¦ Scripts -->
    <script type="module" src="app.js"></script>
    <script type="module" src="dashboard.js"></script>

  </main>
</body>
</html>
